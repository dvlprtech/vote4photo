import{s as Ke,A as ze,C as Fe,T as at,B as He,L as nt,r as Ye,a as v,f as w,c as b,g as C,h as P,d as u,j as x,i as y,u as Ge,v as Je,w as Qe,l as z,m as M,y as p,n as rt,a0 as lt,R as be,K as ot,$ as ft,x as qe,Y as ct,o as it,z as N}from"../chunks/scheduler.5287e156.js";import{S as We,i as Xe,b as d,d as g,m as _,a as $,t as m,e as h,g as Ze,c as et}from"../chunks/index.1b722197.js";import{e as Be,g as ut}from"../chunks/navigation.355a9f3a.js";import{w as $t,b as mt,f as pt}from"../chunks/wallet-store.2931e994.js";import{s as Re}from"../chunks/error-manager.d127ec17.js";import{F as dt,E as gt}from"../chunks/error-modal.0e88668a.js";import{a as ue,y as tt,u as _t,e as ht,z as vt}from"../chunks/fetch-utils.6f52e535.js";import{L as pe,k as bt,h as wt,j as Ct}from"../chunks/index.0f94f00e.js";import{g as kt,a as Et,B as st}from"../chunks/Button.aaa7a6c9.js";import{P as yt,C as xt}from"../chunks/Checkbox.bd53298a.js";import{I as de}from"../chunks/Input.175bdf2b.js";const Dt=n=>({}),Oe=n=>({});function Ue(n){let e,s;const t=n[5].title,a=Ye(t,n,n[7],Oe),o=a||It(n);return{c(){e=w("div"),o&&o.c(),this.h()},l(f){e=C(f,"DIV",{class:!0});var r=P(e);o&&o.l(r),r.forEach(u),this.h()},h(){x(e,"class","py-2 px-3 bg-gray-100 rounded-t-md border-b border-gray-200 dark:border-gray-600 dark:bg-gray-700")},m(f,r){y(f,e,r),o&&o.m(e,null),s=!0},p(f,r){a?a.p&&(!s||r&128)&&Ge(a,t,f,f[7],s?Qe(t,f[7],r,Dt):Je(f[7]),Oe):o&&o.p&&(!s||r&1)&&o.p(f,s?r:-1)},i(f){s||($(o,f),s=!0)},o(f){m(o,f),s=!1},d(f){f&&u(e),o&&o.d(f)}}}function It(n){let e,s;return{c(){e=w("h3"),s=z(n[0]),this.h()},l(t){e=C(t,"H3",{class:!0});var a=P(e);s=M(a,n[0]),a.forEach(u),this.h()},h(){x(e,"class","font-semibold text-gray-900 dark:text-white")},m(t,a){y(t,e,a),p(e,s)},p(t,a){a&1&&rt(s,t[0])},d(t){t&&u(e)}}}function Pt(n){let e,s,t,a=(n[4].title||n[0])&&Ue(n);const o=n[5].default,f=Ye(o,n,n[7],null);return{c(){a&&a.c(),e=v(),s=w("div"),f&&f.c(),this.h()},l(r){a&&a.l(r),e=b(r),s=C(r,"DIV",{class:!0});var c=P(s);f&&f.l(c),c.forEach(u),this.h()},h(){x(s,"class",n[1])},m(r,c){a&&a.m(r,c),y(r,e,c),y(r,s,c),f&&f.m(s,null),t=!0},p(r,c){r[4].title||r[0]?a?(a.p(r,c),c&17&&$(a,1)):(a=Ue(r),a.c(),$(a,1),a.m(e.parentNode,e)):a&&(Ze(),m(a,1,1,()=>{a=null}),et()),f&&f.p&&(!t||c&128)&&Ge(f,o,r,r[7],t?Qe(o,r[7],c,null):Je(r[7]),null),(!t||c&2)&&x(s,"class",r[1])},i(r){t||($(a),$(f,r),t=!0)},o(r){m(a),m(f,r),t=!1},d(r){r&&(u(e),u(s)),a&&a.d(r),f&&f.d(r)}}}function Vt(n){let e,s;const t=[{activeContent:!0},{border:!0},{shadow:!0},{rounded:!0},n[2],{class:"dark:!border-gray-600 "+n[3].class}];let a={$$slots:{default:[Pt]},$$scope:{ctx:n}};for(let o=0;o<t.length;o+=1)a=ze(a,t[o]);return e=new yt({props:a}),e.$on("show",n[6]),{c(){d(e.$$.fragment)},l(o){g(e.$$.fragment,o)},m(o,f){_(e,o,f),s=!0},p(o,[f]){const r=f&12?kt(t,[t[0],t[1],t[2],t[3],f&4&&Et(o[2]),f&8&&{class:"dark:!border-gray-600 "+o[3].class}]):{};f&147&&(r.$$scope={dirty:f,ctx:o}),e.$set(r)},i(o){s||($(e.$$.fragment,o),s=!0)},o(o){m(e.$$.fragment,o),s=!1},d(o){h(e,o)}}}function At(n,e,s){const t=["title","defaultClass"];let a=Fe(e,t),{$$slots:o={},$$scope:f}=e;const r=at(o);let{title:c=""}=e,{defaultClass:k="py-2 px-3"}=e;function L(D){nt.call(this,n,D)}return n.$$set=D=>{s(3,e=ze(ze({},e),He(D))),s(2,a=Fe(e,t)),"title"in D&&s(0,c=D.title),"defaultClass"in D&&s(1,k=D.defaultClass),"$$scope"in D&&s(7,f=D.$$scope)},e=He(e),[c,k,a,e,r,o,L,f]}class Lt extends We{constructor(e){super(),Xe(this,e,At,Vt,Ke,{title:0,defaultClass:1})}}async function Tt(n,...e){const t=new TextEncoder().encode(e.join("")),a=await crypto.subtle.digest(n,t),f=new Uint8Array(a).reduce((c,k)=>c+String.fromCharCode(k),"");return btoa(f)}const zt=async n=>{const e=`${Math.floor(Date.now()/1e3/60)}`;console.log("challengeMinuteDate",e),console.log("email",n);const s=await Tt("SHA-256",e,n);return console.log("challenge",s),s};function Mt(n){let e;return{c(){e=z("Nombre completo")},l(s){e=M(s,"Nombre completo")},m(s,t){y(s,e,t)},d(s){s&&u(e)}}}function Nt(n){let e,s;return e=new ue({props:{icon:bt,slot:"left"}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,a){_(e,t,a),s=!0},p:N,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){m(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function St(n){let e;return{c(){e=z("Email")},l(s){e=M(s,"Email")},m(s,t){y(s,e,t)},d(s){s&&u(e)}}}function jt(n){let e,s;return e=new ue({props:{icon:wt,slot:"left"}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,a){_(e,t,a),s=!0},p:N,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){m(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function Ft(n){let e;return{c(){e=z("Password")},l(s){e=M(s,"Password")},m(s,t){y(s,e,t)},d(s){s&&u(e)}}}function Ht(n){let e,s;return e=new ue({props:{icon:tt,slot:"left"}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,a){_(e,t,a),s=!0},p:N,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){m(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function qt(n){let e;return{c(){e=z("Confirma password")},l(s){e=M(s,"Confirma password")},m(s,t){y(s,e,t)},d(s){s&&u(e)}}}function Bt(n){let e,s;return e=new ue({props:{icon:tt,slot:"left"}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,a){_(e,t,a),s=!0},p:N,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){m(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function Rt(n){var f;let e,s,t,a,o;return s=new pe({props:{for:"walletaccount",class:"text-gray-500",$$slots:{default:[Ut]},$$scope:{ctx:n}}}),a=new de({props:{type:"text",id:"walletaccount",size:"lg",value:`${(f=n[1])==null?void 0:f.name}: ${n[0]}`,readonly:!0,$$slots:{left:[Kt]},$$scope:{ctx:n}}}),{c(){e=w("div"),d(s.$$.fragment),t=v(),d(a.$$.fragment)},l(r){e=C(r,"DIV",{});var c=P(e);g(s.$$.fragment,c),t=b(c),g(a.$$.fragment,c),c.forEach(u)},m(r,c){y(r,e,c),_(s,e,null),p(e,t),_(a,e,null),o=!0},p(r,c){var D;const k={};c&32&&(k.$$scope={dirty:c,ctx:r}),s.$set(k);const L={};c&3&&(L.value=`${(D=r[1])==null?void 0:D.name}: ${r[0]}`),c&32&&(L.$$scope={dirty:c,ctx:r}),a.$set(L)},i(r){o||($(s.$$.fragment,r),$(a.$$.fragment,r),o=!0)},o(r){m(s.$$.fragment,r),m(a.$$.fragment,r),o=!1},d(r){r&&u(e),h(s),h(a)}}}function Ot(n){let e,s;return e=new st({props:{type:"button",class:"w-full",color:"alternative",$$slots:{default:[Yt]},$$scope:{ctx:n}}}),e.$on("click",pt),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,a){_(e,t,a),s=!0},p(t,a){const o={};a&32&&(o.$$scope={dirty:a,ctx:t}),e.$set(o)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){m(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function Ut(n){let e;return{c(){e=z("Cuenta conectada")},l(s){e=M(s,"Cuenta conectada")},m(s,t){y(s,e,t)},d(s){s&&u(e)}}}function Kt(n){let e,s;return e=new ue({props:{icon:Ct,slot:"left"}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,a){_(e,t,a),s=!0},p:N,i(t){s||($(e.$$.fragment,t),s=!0)},o(t){m(e.$$.fragment,t),s=!1},d(t){h(e,t)}}}function Yt(n){let e,s,t;return e=new ue({props:{icon:vt,class:"text-xl mr-2"}}),{c(){d(e.$$.fragment),s=z(`
							Conecta tu wallet`)},l(a){g(e.$$.fragment,a),s=M(a,`
							Conecta tu wallet`)},m(a,o){_(e,a,o),y(a,s,o),t=!0},p:N,i(a){t||($(e.$$.fragment,a),t=!0)},o(a){m(e.$$.fragment,a),t=!1},d(a){a&&u(s),h(e,a)}}}function Gt(n){let e,s="Condiciones legales";return{c(){e=w("a"),e.textContent=s,this.h()},l(t){e=C(t,"A",{id:!0,class:!0,"data-svelte-h":!0}),be(e)!=="svelte-mgm3nd"&&(e.textContent=s),this.h()},h(){x(e,"id","terms_and_conditions"),x(e,"class","font-medium text-primary-600 hover:underline")},m(t,a){y(t,e,a)},p:N,d(t){t&&u(e)}}}function Jt(n){let e;return{c(){e=z(n[3])},l(s){e=M(s,n[3])},m(s,t){y(s,e,t)},p:N,d(s){s&&u(e)}}}function Qt(n){let e,s,t;return e=new ue({props:{icon:_t,color:"white",class:"text-xl mr-2"}}),{c(){d(e.$$.fragment),s=z(`
						Registrarse`)},l(a){g(e.$$.fragment,a),s=M(a,`
						Registrarse`)},m(a,o){_(e,a,o),y(a,s,o),t=!0},p:N,i(a){t||($(e.$$.fragment,a),t=!0)},o(a){m(e.$$.fragment,a),t=!1},d(a){a&&u(s),h(e,a)}}}function Wt(n){let e,s,t,a,o=`<img class="w-20 h-20 mr-2" src="/images/logo.svg" alt="Logo Vote4Photo"/>
			Vote4Photo`,f,r,c,k,L="Crea tu cuenta",D,E,X,S,we,j,Ce,Z,F,ke,H,Ee,q,ee,B,ye,R,xe,te,O,De,U,Ie,V,A,ge,K,Y,Pe,G,Ve,J,Ae,se,Me='¿Ya tienes una cuenta? <a href="/signin" class="font-medium text-primary-600 hover:underline">Accede con tu cuenta</a>',_e,ae,he,ne,ve,Le,Ne;S=new pe({props:{for:"fullName",class:"text-gray-500",$$slots:{default:[Mt]},$$scope:{ctx:n}}}),j=new de({props:{type:"text",name:"fullName",id:"fullName",placeholder:"John Doe",required:"true",size:"lg",$$slots:{left:[Nt]},$$scope:{ctx:n}}}),F=new pe({props:{for:"email",class:"text-gray-500",$$slots:{default:[St]},$$scope:{ctx:n}}}),H=new de({props:{type:"email",name:"email",id:"email",placeholder:"name@example.com",required:"true",size:"lg",$$slots:{left:[jt]},$$scope:{ctx:n}}}),B=new pe({props:{for:"password",class:"text-gray-500",$$slots:{default:[Ft]},$$scope:{ctx:n}}}),R=new de({props:{type:"password",name:"password",id:"password",required:"true",size:"lg",$$slots:{left:[Ht]},$$scope:{ctx:n}}}),O=new pe({props:{for:"password2",class:"text-gray-500",$$slots:{default:[qt]},$$scope:{ctx:n}}}),U=new de({props:{type:"password",name:"password2",id:"password2",required:"true",size:"lg",$$slots:{left:[Bt]},$$scope:{ctx:n}}});const Se=[Ot,Rt],Q=[];function je(l,i){return l[0]===void 0?0:1}return V=je(n),A=Q[V]=Se[V](n),Y=new xt({props:{id:"terms",name:"terms",required:"true",$$slots:{default:[Gt]},$$scope:{ctx:n}}}),G=new Lt({props:{class:"w-64 text-sm font-light ",title:"Términos y condiciones",triggeredBy:"#terms_and_conditions",$$slots:{default:[Jt]},$$scope:{ctx:n}}}),J=new st({props:{type:"submit",class:"w-full bg-secondary-600 hover:bg-secondary-500",disabled:!n[0],$$slots:{default:[Qt]},$$scope:{ctx:n}}}),ae=new dt({}),ne=new gt({}),{c(){e=v(),s=w("section"),t=w("div"),a=w("a"),a.innerHTML=o,f=v(),r=w("div"),c=w("div"),k=w("h1"),k.textContent=L,D=v(),E=w("form"),X=w("div"),d(S.$$.fragment),we=v(),d(j.$$.fragment),Ce=v(),Z=w("div"),d(F.$$.fragment),ke=v(),d(H.$$.fragment),Ee=v(),q=w("div"),ee=w("div"),d(B.$$.fragment),ye=v(),d(R.$$.fragment),xe=v(),te=w("div"),d(O.$$.fragment),De=v(),d(U.$$.fragment),Ie=v(),A.c(),ge=v(),K=w("p"),d(Y.$$.fragment),Pe=v(),d(G.$$.fragment),Ve=v(),d(J.$$.fragment),Ae=v(),se=w("p"),se.innerHTML=Me,_e=v(),d(ae.$$.fragment),he=v(),d(ne.$$.fragment),this.h()},l(l){lt("svelte-10ihxoh",document.head).forEach(u),e=b(l),s=C(l,"SECTION",{class:!0});var $e=P(s);t=C($e,"DIV",{class:!0});var re=P(t);a=C(re,"A",{href:!0,class:!0,"data-svelte-h":!0}),be(a)!=="svelte-17dzomc"&&(a.innerHTML=o),f=b(re),r=C(re,"DIV",{class:!0});var me=P(r);c=C(me,"DIV",{class:!0});var T=P(c);k=C(T,"H1",{class:!0,"data-svelte-h":!0}),be(k)!=="svelte-68n5c7"&&(k.textContent=L),D=b(T),E=C(T,"FORM",{class:!0});var I=P(E);X=C(I,"DIV",{});var le=P(X);g(S.$$.fragment,le),we=b(le),g(j.$$.fragment,le),le.forEach(u),Ce=b(I),Z=C(I,"DIV",{});var oe=P(Z);g(F.$$.fragment,oe),ke=b(oe),g(H.$$.fragment,oe),oe.forEach(u),Ee=b(I),q=C(I,"DIV",{class:!0});var fe=P(q);ee=C(fe,"DIV",{});var W=P(ee);g(B.$$.fragment,W),ye=b(W),g(R.$$.fragment,W),W.forEach(u),xe=b(fe),te=C(fe,"DIV",{});var ce=P(te);g(O.$$.fragment,ce),De=b(ce),g(U.$$.fragment,ce),ce.forEach(u),fe.forEach(u),Ie=b(I),A.l(I),ge=b(I),K=C(I,"P",{class:!0});var ie=P(K);g(Y.$$.fragment,ie),Pe=b(ie),g(G.$$.fragment,ie),ie.forEach(u),Ve=b(I),g(J.$$.fragment,I),I.forEach(u),Ae=b(T),se=C(T,"P",{class:!0,"data-svelte-h":!0}),be(se)!=="svelte-l2129r"&&(se.innerHTML=Me),T.forEach(u),me.forEach(u),re.forEach(u),$e.forEach(u),_e=b(l),g(ae.$$.fragment,l),he=b(l),g(ne.$$.fragment,l),this.h()},h(){document.title="Vote4Photo - Acceso",x(a,"href","/"),x(a,"class","flex items-center mb-6 font-semibold text-gray-600 dark:text-white text-4xl"),x(k,"class","text-2xl font-semibold leading-tight tracking-tight text-gray-700"),x(q,"class","flex flex-row gap-2"),x(K,"class","text-sm font-light text-gray-500 dark:text-gray-400"),x(E,"class","space-y-4 md:space-y-6"),x(se,"class","text-sm font-light text-gray-500 dark:text-gray-400"),x(c,"class","p-6 space-y-4 md:space-y-6 sm:p-8"),x(r,"class","w-full bg-white rounded-lg shadow dark:border md:mt-0 sm:max-w-md xl:p-0"),x(t,"class","flex flex-col items-center justify-center px-6 py-8 mx-auto md:h-screen lg:py-0"),x(s,"class","bg-gray-50 min-h-full")},m(l,i){y(l,e,i),y(l,s,i),p(s,t),p(t,a),p(t,f),p(t,r),p(r,c),p(c,k),p(c,D),p(c,E),p(E,X),_(S,X,null),p(X,we),_(j,X,null),p(E,Ce),p(E,Z),_(F,Z,null),p(Z,ke),_(H,Z,null),p(E,Ee),p(E,q),p(q,ee),_(B,ee,null),p(ee,ye),_(R,ee,null),p(q,xe),p(q,te),_(O,te,null),p(te,De),_(U,te,null),p(E,Ie),Q[V].m(E,null),p(E,ge),p(E,K),_(Y,K,null),p(K,Pe),_(G,K,null),p(E,Ve),_(J,E,null),p(c,Ae),p(c,se),y(l,_e,i),_(ae,l,i),y(l,he,i),_(ne,l,i),ve=!0,Le||(Ne=ot(E,"submit",ft(n[2])),Le=!0)},p(l,[i]){const $e={};i&32&&($e.$$scope={dirty:i,ctx:l}),S.$set($e);const re={};i&32&&(re.$$scope={dirty:i,ctx:l}),j.$set(re);const me={};i&32&&(me.$$scope={dirty:i,ctx:l}),F.$set(me);const T={};i&32&&(T.$$scope={dirty:i,ctx:l}),H.$set(T);const I={};i&32&&(I.$$scope={dirty:i,ctx:l}),B.$set(I);const le={};i&32&&(le.$$scope={dirty:i,ctx:l}),R.$set(le);const oe={};i&32&&(oe.$$scope={dirty:i,ctx:l}),O.$set(oe);const fe={};i&32&&(fe.$$scope={dirty:i,ctx:l}),U.$set(fe);let W=V;V=je(l),V===W?Q[V].p(l,i):(Ze(),m(Q[W],1,1,()=>{Q[W]=null}),et(),A=Q[V],A?A.p(l,i):(A=Q[V]=Se[V](l),A.c()),$(A,1),A.m(E,ge));const ce={};i&32&&(ce.$$scope={dirty:i,ctx:l}),Y.$set(ce);const ie={};i&32&&(ie.$$scope={dirty:i,ctx:l}),G.$set(ie);const Te={};i&1&&(Te.disabled=!l[0]),i&32&&(Te.$$scope={dirty:i,ctx:l}),J.$set(Te)},i(l){ve||($(S.$$.fragment,l),$(j.$$.fragment,l),$(F.$$.fragment,l),$(H.$$.fragment,l),$(B.$$.fragment,l),$(R.$$.fragment,l),$(O.$$.fragment,l),$(U.$$.fragment,l),$(A),$(Y.$$.fragment,l),$(G.$$.fragment,l),$(J.$$.fragment,l),$(ae.$$.fragment,l),$(ne.$$.fragment,l),ve=!0)},o(l){m(S.$$.fragment,l),m(j.$$.fragment,l),m(F.$$.fragment,l),m(H.$$.fragment,l),m(B.$$.fragment,l),m(R.$$.fragment,l),m(O.$$.fragment,l),m(U.$$.fragment,l),m(A),m(Y.$$.fragment,l),m(G.$$.fragment,l),m(J.$$.fragment,l),m(ae.$$.fragment,l),m(ne.$$.fragment,l),ve=!1},d(l){l&&(u(e),u(s),u(_e),u(he)),h(S),h(j),h(F),h(H),h(B),h(R),h(O),h(U),Q[V].d(),h(Y),h(G),h(J),h(ae,l),h(ne,l),Le=!1,Ne()}}}function Xt(n,e,s){let t,a;qe(n,$t,r=>s(0,t=r)),qe(n,mt,r=>s(1,a=r)),ct(Be);const o=async r=>{const c=new FormData(r.target);if(!t){Re("Es necesario conectar con una wallet para poder acceder");return}if(c.get("password")!==c.get("password2")){Re("Las contraseñas no coinciden");return}const k=await ht("/api/account/signup",{method:"POST",headers:{"x-v4p-challenge":await zt(c.get("email"))},payload:{fullName:c.get("fullName"),email:c.get("email"),password:c.get("password"),terms:c.get("terms"),chainId:a==null?void 0:a.id,account:t}});if(k.status===200){console.log("Cuenta creada correctamente");const L=await k.json();Be.set(L.jwt),ut("/app/home")}};return it(async()=>{}),[t,a,o,`
	La presente aplicación es una PoC sin objetivo comercial, creada exclusivamente para fines educativos.
	Si has llegado por accidente a esta página, por favor, no introduzcas tus datos personales.
	`]}class is extends We{constructor(e){super(),Xe(this,e,Xt,Wt,Ke,{})}}export{is as component};
