import{e as Ne,M as Ke,a as ce,u as at,v as ot,w as ft,x as ut,m as it}from"../chunks/fetch-utils.6f52e535.js";import{Y as st,s as $t,p as Se,a as N,c as A,i as D,Z as Ae,d as $,x as ct,f as P,g as C,h as z,j as L,y as c,K as mt,$ as pt,l as j,m as q,z as me,U as gt,R as ze,n as Ve,e as Fe}from"../chunks/scheduler.5287e156.js";import{d as nt}from"../chunks/navigation.355a9f3a.js";import{l as _t,T as dt,a as He,B as ht}from"../chunks/profile-store.6c1c693c.js";import{S as bt,i as vt,h as Le,b as v,d as w,m as k,a as _,t as d,e as I,g as Be,c as je}from"../chunks/index.1b722197.js";import{e as Je,b as We,g as Ye,l as Ze}from"../chunks/format-utils.1536c968.js";import{s as Oe}from"../chunks/error-manager.d127ec17.js";import{M as wt,B as kt}from"../chunks/my-card.17dcef51.js";import{L as oe,e as It,g as Et,b as Vt}from"../chunks/index.0f94f00e.js";import{B as ue}from"../chunks/Button.aaa7a6c9.js";import{I as fe}from"../chunks/Input.175bdf2b.js";import{S as Dt}from"../chunks/Select.c5cda8bb.js";import{S as rt}from"../chunks/Spinner.3757ab2c.js";import{w as Pt}from"../chunks/index.360b1b54.js";const Ct=!1,St=async({params:r})=>{if(st(nt)){const t={};t.profile=await _t();const s=await Ne("/api/config/votes_pricing");if(s.status===200){const n=(await s.json()).pricing;n.sort((o,f)=>o.amount-f.amount);const l=n.map(o=>({value:o.amount,name:`${o.amount} => ${o.price} €`}));t.priceList=l,t.votesPricing=n}return{...t}}throw new Error("No user id")},Ts=Object.freeze(Object.defineProperty({__proto__:null,load:St,ssr:Ct},Symbol.toStringTag,{value:"Module"})),lt=Pt({tx_base:"https://sepolia.etherscan.io/tx",token_base:""}),Tt=async()=>{const r=await fetch("/api/config/urls");r.status===200&&lt.set(await r.json())},Qe=r=>`${st(lt).token_base}/${r}`;Tt().catch(console.error);function Xe(r,e,t){const s=r.slice();return s[26]=e[t],s}function Nt(r){let e;return{c(){e=j("Nombre completo")},l(t){e=q(t,"Nombre completo")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function At(r){let e;return{c(){e=j("Password")},l(t){e=q(t,"Password")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function Ft(r){let e;return{c(){e=j("Confirma password")},l(t){e=q(t,"Confirma password")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function Lt(r){let e;return{c(){e=j("Email")},l(t){e=q(t,"Email")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function zt(r){let e;return{c(){e=j("Rol")},l(t){e=q(t,"Rol")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function Bt(r){let e;return{c(){e=j("Fondos")},l(t){e=q(t,"Fondos")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function jt(r){let e,t="€";return{c(){e=P("span"),e.textContent=t,this.h()},l(s){e=C(s,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-49n6t8"&&(e.textContent=t),this.h()},h(){L(e,"slot","right"),L(e,"class","text-gray-500 text-lg")},m(s,n){D(s,e,n)},p:me,d(s){s&&$(e)}}}function qt(r){let e,t;return e=new ce({props:{icon:ot,size:"lg"}}),{c(){v(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,n){k(e,s,n),t=!0},p:me,i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){I(e,s)}}}function Mt(r){let e;return{c(){e=j("Votos disponibles")},l(t){e=q(t,"Votos disponibles")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function Ot(r){let e,t;return e=new ce({props:{icon:Et,size:"lg"}}),{c(){v(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,n){k(e,s,n),t=!0},p:me,i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){I(e,s)}}}function Rt(r){let e,t,s;return e=new ce({props:{icon:ft,class:"w-5 h-5 mr-1"}}),{c(){v(e.$$.fragment),t=j(`
						Guardar`)},l(n){w(e.$$.fragment,n),t=q(n,`
						Guardar`)},m(n,l){k(e,n,l),D(n,t,l),s=!0},p:me,i(n){s||(_(e.$$.fragment,n),s=!0)},o(n){d(e.$$.fragment,n),s=!1},d(n){n&&$(t),I(e,n)}}}function Ut(r){let e,t,s,n,l,o,f,a,u,i,E,F,m,S,p,V,M,y,G,h,T,x,X,J,W,ee,K,se,b,R,H,U,O,Z,Y,pe,ne,re,le,ge,ae,_e,te,qe,De,ie,Te,Me,Re;return l=new oe({props:{for:"fullName",class:"mb-2",$$slots:{default:[Nt]},$$scope:{ctx:r}}}),f=new fe({props:{type:"text",id:"fullName",name:"fullName",placeholder:"John Smith",required:!0,value:r[3].fullName}}),i=new oe({props:{for:"password",class:"mb-2",$$slots:{default:[At]},$$scope:{ctx:r}}}),F=new fe({props:{type:"password",id:"password",name:"password"}}),p=new oe({props:{for:"password2",class:"mb-2",$$slots:{default:[Ft]},$$scope:{ctx:r}}}),M=new fe({props:{type:"password",id:"password2",name:"password2"}}),h=new oe({props:{for:"email",class:"mb-2",$$slots:{default:[Lt]},$$scope:{ctx:r}}}),x=new fe({props:{type:"email",id:"email",name:"email",readonly:!0,value:r[3].email}}),W=new oe({props:{for:"role",class:"mb-2",$$slots:{default:[zt]},$$scope:{ctx:r}}}),K=new fe({props:{id:"role",name:"role",readonly:!0,value:r[3].role}}),H=new oe({props:{for:"funds",class:"mb-2",$$slots:{default:[Bt]},$$scope:{ctx:r}}}),O=new fe({props:{type:"number",id:"funds",name:"funds",readonly:!0,value:r[3].funds,$$slots:{right:[jt]},$$scope:{ctx:r}}}),Y=new ue({props:{type:"button",outline:!0,color:"red",size:"xs",$$slots:{default:[qt]},$$scope:{ctx:r}}}),Y.$on("click",r[14]),le=new oe({props:{for:"remainingVotes",class:"mb-2",$$slots:{default:[Mt]},$$scope:{ctx:r}}}),ae=new fe({props:{type:"number",id:"remainingVotes",name:"remainingVotes",readonly:!0,value:r[3].remainingVotes}}),te=new ue({props:{type:"button",outline:!0,color:"yellow",size:"xs",$$slots:{default:[Ot]},$$scope:{ctx:r}}}),te.$on("click",r[15]),ie=new ue({props:{type:"submit",class:"w-52",outline:!0,color:"primary",$$slots:{default:[Rt]},$$scope:{ctx:r}}}),{c(){e=P("div"),t=P("form"),s=P("div"),n=P("div"),v(l.$$.fragment),o=N(),v(f.$$.fragment),a=N(),u=P("div"),v(i.$$.fragment),E=N(),v(F.$$.fragment),m=N(),S=P("div"),v(p.$$.fragment),V=N(),v(M.$$.fragment),y=N(),G=P("div"),v(h.$$.fragment),T=N(),v(x.$$.fragment),X=N(),J=P("div"),v(W.$$.fragment),ee=N(),v(K.$$.fragment),se=N(),b=P("div"),R=P("div"),v(H.$$.fragment),U=N(),v(O.$$.fragment),Z=N(),v(Y.$$.fragment),pe=N(),ne=P("div"),re=P("div"),v(le.$$.fragment),ge=N(),v(ae.$$.fragment),_e=N(),v(te.$$.fragment),qe=N(),De=P("div"),v(ie.$$.fragment),this.h()},l(g){e=C(g,"DIV",{class:!0});var B=z(e);t=C(B,"FORM",{});var Pe=z(t);s=C(Pe,"DIV",{class:!0});var Q=z(s);n=C(Q,"DIV",{class:!0});var de=z(n);w(l.$$.fragment,de),o=A(de),w(f.$$.fragment,de),de.forEach($),a=A(Q),u=C(Q,"DIV",{});var he=z(u);w(i.$$.fragment,he),E=A(he),w(F.$$.fragment,he),he.forEach($),m=A(Q),S=C(Q,"DIV",{});var be=z(S);w(p.$$.fragment,be),V=A(be),w(M.$$.fragment,be),be.forEach($),y=A(Q),G=C(Q,"DIV",{});var ve=z(G);w(h.$$.fragment,ve),T=A(ve),w(x.$$.fragment,ve),ve.forEach($),X=A(Q),J=C(Q,"DIV",{});var we=z(J);w(W.$$.fragment,we),ee=A(we),w(K.$$.fragment,we),we.forEach($),se=A(Q),b=C(Q,"DIV",{class:!0});var ke=z(b);R=C(ke,"DIV",{});var Ie=z(R);w(H.$$.fragment,Ie),U=A(Ie),w(O.$$.fragment,Ie),Ie.forEach($),Z=A(ke),w(Y.$$.fragment,ke),ke.forEach($),pe=A(Q),ne=C(Q,"DIV",{class:!0});var $e=z(ne);re=C($e,"DIV",{});var Ee=z(re);w(le.$$.fragment,Ee),ge=A(Ee),w(ae.$$.fragment,Ee),Ee.forEach($),_e=A($e),w(te.$$.fragment,$e),$e.forEach($),qe=A(Q),De=C(Q,"DIV",{class:!0});var Ce=z(De);w(ie.$$.fragment,Ce),Ce.forEach($),Q.forEach($),Pe.forEach($),B.forEach($),this.h()},h(){L(n,"class","col-span-2"),L(b,"class","flex flex-row gap-2 items-end"),L(ne,"class","flex flex-row gap-2 items-end"),L(De,"class","flex col-span-2"),L(s,"class","grid gap-4 mb-4 grid-cols-2 max-w-screen-sm"),L(e,"class","flex flex-col")},m(g,B){D(g,e,B),c(e,t),c(t,s),c(s,n),k(l,n,null),c(n,o),k(f,n,null),c(s,a),c(s,u),k(i,u,null),c(u,E),k(F,u,null),c(s,m),c(s,S),k(p,S,null),c(S,V),k(M,S,null),c(s,y),c(s,G),k(h,G,null),c(G,T),k(x,G,null),c(s,X),c(s,J),k(W,J,null),c(J,ee),k(K,J,null),c(s,se),c(s,b),c(b,R),k(H,R,null),c(R,U),k(O,R,null),c(b,Z),k(Y,b,null),c(s,pe),c(s,ne),c(ne,re),k(le,re,null),c(re,ge),k(ae,re,null),c(ne,_e),k(te,ne,null),c(s,qe),c(s,De),k(ie,De,null),r[16](t),Te=!0,Me||(Re=mt(t,"submit",pt(r[10])),Me=!0)},p(g,B){const Pe={};B&536870912&&(Pe.$$scope={dirty:B,ctx:g}),l.$set(Pe);const Q={};B&8&&(Q.value=g[3].fullName),f.$set(Q);const de={};B&536870912&&(de.$$scope={dirty:B,ctx:g}),i.$set(de);const he={};B&536870912&&(he.$$scope={dirty:B,ctx:g}),p.$set(he);const be={};B&536870912&&(be.$$scope={dirty:B,ctx:g}),h.$set(be);const ve={};B&8&&(ve.value=g[3].email),x.$set(ve);const we={};B&536870912&&(we.$$scope={dirty:B,ctx:g}),W.$set(we);const ke={};B&8&&(ke.value=g[3].role),K.$set(ke);const Ie={};B&536870912&&(Ie.$$scope={dirty:B,ctx:g}),H.$set(Ie);const $e={};B&8&&($e.value=g[3].funds),B&536870912&&($e.$$scope={dirty:B,ctx:g}),O.$set($e);const Ee={};B&536870912&&(Ee.$$scope={dirty:B,ctx:g}),Y.$set(Ee);const Ce={};B&536870912&&(Ce.$$scope={dirty:B,ctx:g}),le.$set(Ce);const Ue={};B&8&&(Ue.value=g[3].remainingVotes),ae.$set(Ue);const xe={};B&536870912&&(xe.$$scope={dirty:B,ctx:g}),te.$set(xe);const Ge={};B&536870912&&(Ge.$$scope={dirty:B,ctx:g}),ie.$set(Ge)},i(g){Te||(_(l.$$.fragment,g),_(f.$$.fragment,g),_(i.$$.fragment,g),_(F.$$.fragment,g),_(p.$$.fragment,g),_(M.$$.fragment,g),_(h.$$.fragment,g),_(x.$$.fragment,g),_(W.$$.fragment,g),_(K.$$.fragment,g),_(H.$$.fragment,g),_(O.$$.fragment,g),_(Y.$$.fragment,g),_(le.$$.fragment,g),_(ae.$$.fragment,g),_(te.$$.fragment,g),_(ie.$$.fragment,g),Te=!0)},o(g){d(l.$$.fragment,g),d(f.$$.fragment,g),d(i.$$.fragment,g),d(F.$$.fragment,g),d(p.$$.fragment,g),d(M.$$.fragment,g),d(h.$$.fragment,g),d(x.$$.fragment,g),d(W.$$.fragment,g),d(K.$$.fragment,g),d(H.$$.fragment,g),d(O.$$.fragment,g),d(Y.$$.fragment,g),d(le.$$.fragment,g),d(ae.$$.fragment,g),d(te.$$.fragment,g),d(ie.$$.fragment,g),Te=!1},d(g){g&&$(e),I(l),I(f),I(i),I(F),I(p),I(M),I(h),I(x),I(W),I(K),I(H),I(O),I(Y),I(le),I(ae),I(te),I(ie),r[16](null),Me=!1,Re()}}}function xt(r){let e,t,s,n;return t=new ce({props:{icon:at,class:"text-lg"}}),{c(){e=P("div"),v(t.$$.fragment),s=j(`
		Cuenta`),this.h()},l(l){e=C(l,"DIV",{slot:!0,class:!0});var o=z(e);w(t.$$.fragment,o),s=q(o,`
		Cuenta`),o.forEach($),this.h()},h(){L(e,"slot","title"),L(e,"class","flex items-center gap-2")},m(l,o){D(l,e,o),k(t,e,null),c(e,s),n=!0},p:me,i(l){n||(_(t.$$.fragment,l),n=!0)},o(l){d(t.$$.fragment,l),n=!1},d(l){l&&$(e),I(t)}}}function ye(r){let e,t,s,n=r[26].currentContestTitle+"",l;return{c(){e=P("li"),t=j("Concurso actual: "),s=P("span"),l=j(n),this.h()},l(o){e=C(o,"LI",{});var f=z(e);t=q(f,"Concurso actual: "),s=C(f,"SPAN",{class:!0});var a=z(s);l=q(a,n),a.forEach($),f.forEach($),this.h()},h(){L(s,"class","text-text-900")},m(o,f){D(o,e,f),c(e,t),c(e,s),c(s,l)},p(o,f){f&8&&n!==(n=o[26].currentContestTitle+"")&&Ve(l,n)},d(o){o&&$(e)}}}function Gt(r){let e,t=r[26].title+"",s,n,l,o,f,a,u=r[26].tokenId+"",i,E,F,m,S,p,V=We(r[26].account,16)+"",M,y,G,h,T,x=Ye(r[26].size)+"",X,J,W,ee,K,se=Ze(r[26].ownerSince)+"",b,R,H,U=r[26].currentContestTitle&&ye(r);return{c(){e=P("h5"),s=j(t),n=N(),l=P("ul"),o=P("li"),f=j("Token ID: "),a=P("a"),i=j(u),F=N(),m=P("li"),S=j("Cuenta: "),p=P("span"),M=j(V),y=N(),G=P("li"),h=j("Tamaño: "),T=P("span"),X=j(x),J=N(),W=P("li"),ee=j("Desde: "),K=P("span"),b=j(se),R=N(),U&&U.c(),H=N(),this.h()},l(O){e=C(O,"H5",{class:!0});var Z=z(e);s=q(Z,t),Z.forEach($),n=A(O),l=C(O,"UL",{class:!0});var Y=z(l);o=C(Y,"LI",{});var pe=z(o);f=q(pe,"Token ID: "),a=C(pe,"A",{href:!0,class:!0,target:!0});var ne=z(a);i=q(ne,u),ne.forEach($),pe.forEach($),F=A(Y),m=C(Y,"LI",{class:!0});var re=z(m);S=q(re,"Cuenta: "),p=C(re,"SPAN",{class:!0});var le=z(p);M=q(le,V),le.forEach($),re.forEach($),y=A(Y),G=C(Y,"LI",{});var ge=z(G);h=q(ge,"Tamaño: "),T=C(ge,"SPAN",{class:!0});var ae=z(T);X=q(ae,x),ae.forEach($),ge.forEach($),J=A(Y),W=C(Y,"LI",{});var _e=z(W);ee=q(_e,"Desde: "),K=C(_e,"SPAN",{class:!0});var te=z(K);b=q(te,se),te.forEach($),_e.forEach($),R=A(Y),U&&U.l(Y),Y.forEach($),H=A(O),this.h()},h(){L(e,"class","mb-2 text-lg tracking-tight"),L(a,"href",E=Qe(r[26].tokenId)),L(a,"class","text-blue-600 font-semibold"),L(a,"target","_blank"),L(p,"class","text-text-900"),L(m,"class","text-ellipsis"),L(T,"class","text-text-900"),L(K,"class","text-text-900"),L(l,"class","text-text-400 text-sm")},m(O,Z){D(O,e,Z),c(e,s),D(O,n,Z),D(O,l,Z),c(l,o),c(o,f),c(o,a),c(a,i),c(l,F),c(l,m),c(m,S),c(m,p),c(p,M),c(l,y),c(l,G),c(G,h),c(G,T),c(T,X),c(l,J),c(l,W),c(W,ee),c(W,K),c(K,b),c(l,R),U&&U.m(l,null),D(O,H,Z)},p(O,Z){Z&8&&t!==(t=O[26].title+"")&&Ve(s,t),Z&8&&u!==(u=O[26].tokenId+"")&&Ve(i,u),Z&8&&E!==(E=Qe(O[26].tokenId))&&L(a,"href",E),Z&8&&V!==(V=We(O[26].account,16)+"")&&Ve(M,V),Z&8&&x!==(x=Ye(O[26].size)+"")&&Ve(X,x),Z&8&&se!==(se=Ze(O[26].ownerSince)+"")&&Ve(b,se),O[26].currentContestTitle?U?U.p(O,Z):(U=ye(O),U.c(),U.m(l,null)):U&&(U.d(1),U=null)},d(O){O&&($(e),$(n),$(l),$(H)),U&&U.d()}}}function et(r){let e,t;return e=new wt({props:{imgSrc:"/api/photo/"+r[26].photoKey,horizontal:!0,$$slots:{default:[Gt]},$$scope:{ctx:r}}}),{c(){v(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,n){k(e,s,n),t=!0},p(s,n){const l={};n&8&&(l.imgSrc="/api/photo/"+s[26].photoKey),n&536870920&&(l.$$scope={dirty:n,ctx:s}),e.$set(l)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){I(e,s)}}}function Kt(r){let e,t,s=Je(r[3].photos),n=[];for(let o=0;o<s.length;o+=1)n[o]=et(Xe(r,s,o));const l=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){e=P("div");for(let o=0;o<n.length;o+=1)n[o].c();this.h()},l(o){e=C(o,"DIV",{class:!0});var f=z(e);for(let a=0;a<n.length;a+=1)n[a].l(f);f.forEach($),this.h()},h(){L(e,"class","flex flex-row gap-2 flex-wrap photos mt-3")},m(o,f){D(o,e,f);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);t=!0},p(o,f){if(f&8){s=Je(o[3].photos);let a;for(a=0;a<s.length;a+=1){const u=Xe(o,s,a);n[a]?(n[a].p(u,f),_(n[a],1)):(n[a]=et(u),n[a].c(),_(n[a],1),n[a].m(e,null))}for(Be(),a=s.length;a<n.length;a+=1)l(a);je()}},i(o){if(!t){for(let f=0;f<s.length;f+=1)_(n[f]);t=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)d(n[f]);t=!1},d(o){o&&$(e),gt(n,o)}}}function tt(r){let e,t;return e=new kt({props:{rounded:!0,class:"text-white bg-primary-400 text-xs font-bold",$$slots:{default:[Ht]},$$scope:{ctx:r}}}),{c(){v(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,n){k(e,s,n),t=!0},p(s,n){const l={};n&536870920&&(l.$$scope={dirty:n,ctx:s}),e.$set(l)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){I(e,s)}}}function Ht(r){let e=r[3].photos.length+"",t;return{c(){t=j(e)},l(s){t=q(s,e)},m(s,n){D(s,t,n)},p(s,n){n&8&&e!==(e=s[3].photos.length+"")&&Ve(t,e)},d(s){s&&$(t)}}}function Jt(r){var u;let e,t,s,n,l="Fotos",o,f;t=new ce({props:{icon:It,class:"text-lg"}});let a=((u=r[3])==null?void 0:u.photos.length)>0&&tt(r);return{c(){e=P("div"),v(t.$$.fragment),s=N(),n=P("span"),n.textContent=l,o=N(),a&&a.c(),this.h()},l(i){e=C(i,"DIV",{slot:!0,class:!0});var E=z(e);w(t.$$.fragment,E),s=A(E),n=C(E,"SPAN",{class:!0,"data-svelte-h":!0}),ze(n)!=="svelte-2f3nim"&&(n.textContent=l),o=A(E),a&&a.l(E),E.forEach($),this.h()},h(){L(n,"class",""),L(e,"slot","title"),L(e,"class","flex items-center gap-2 relative")},m(i,E){D(i,e,E),k(t,e,null),c(e,s),c(e,n),c(e,o),a&&a.m(e,null),f=!0},p(i,E){var F;((F=i[3])==null?void 0:F.photos.length)>0?a?(a.p(i,E),E&8&&_(a,1)):(a=tt(i),a.c(),_(a,1),a.m(e,null)):a&&(Be(),d(a,1,1,()=>{a=null}),je())},i(i){f||(_(t.$$.fragment,i),_(a),f=!0)},o(i){d(t.$$.fragment,i),d(a),f=!1},d(i){i&&$(e),I(t),a&&a.d()}}}function Wt(r){let e,t,s,n;return e=new He({props:{open:!0,$$slots:{title:[xt],default:[Ut]},$$scope:{ctx:r}}}),s=new He({props:{$$slots:{title:[Jt],default:[Kt]},$$scope:{ctx:r}}}),{c(){v(e.$$.fragment),t=N(),v(s.$$.fragment)},l(l){w(e.$$.fragment,l),t=A(l),w(s.$$.fragment,l)},m(l,o){k(e,l,o),D(l,t,o),k(s,l,o),n=!0},p(l,o){const f={};o&536871230&&(f.$$scope={dirty:o,ctx:l}),e.$set(f);const a={};o&536870920&&(a.$$scope={dirty:o,ctx:l}),s.$set(a)},i(l){n||(_(e.$$.fragment,l),_(s.$$.fragment,l),n=!0)},o(l){d(e.$$.fragment,l),d(s.$$.fragment,l),n=!1},d(l){l&&$(t),I(e,l),I(s,l)}}}function Yt(r){let e;return{c(){e=j("1 €")},l(t){e=q(t,"1 €")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function Zt(r){let e;return{c(){e=j("5 €")},l(t){e=q(t,"5 €")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function Qt(r){let e;return{c(){e=j("10 €")},l(t){e=q(t,"10 €")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function Xt(r){let e;return{c(){e=j("50 €")},l(t){e=q(t,"50 €")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function yt(r){let e,t,s,n,l,o,f,a;return e=new ue({props:{pill:!0,color:"light",$$slots:{default:[Yt]},$$scope:{ctx:r}}}),e.$on("click",r[17]),s=new ue({props:{pill:!0,color:"green",$$slots:{default:[Zt]},$$scope:{ctx:r}}}),s.$on("click",r[18]),l=new ue({props:{pill:!0,color:"yellow",$$slots:{default:[Qt]},$$scope:{ctx:r}}}),l.$on("click",r[19]),f=new ue({props:{pill:!0,color:"red",$$slots:{default:[Xt]},$$scope:{ctx:r}}}),f.$on("click",r[20]),{c(){v(e.$$.fragment),t=N(),v(s.$$.fragment),n=N(),v(l.$$.fragment),o=N(),v(f.$$.fragment)},l(u){w(e.$$.fragment,u),t=A(u),w(s.$$.fragment,u),n=A(u),w(l.$$.fragment,u),o=A(u),w(f.$$.fragment,u)},m(u,i){k(e,u,i),D(u,t,i),k(s,u,i),D(u,n,i),k(l,u,i),D(u,o,i),k(f,u,i),a=!0},p(u,i){const E={};i&536870912&&(E.$$scope={dirty:i,ctx:u}),e.$set(E);const F={};i&536870912&&(F.$$scope={dirty:i,ctx:u}),s.$set(F);const m={};i&536870912&&(m.$$scope={dirty:i,ctx:u}),l.$set(m);const S={};i&536870912&&(S.$$scope={dirty:i,ctx:u}),f.$set(S)},i(u){a||(_(e.$$.fragment,u),_(s.$$.fragment,u),_(l.$$.fragment,u),_(f.$$.fragment,u),a=!0)},o(u){d(e.$$.fragment,u),d(s.$$.fragment,u),d(l.$$.fragment,u),d(f.$$.fragment,u),a=!1},d(u){u&&($(t),$(n),$(o)),I(e,u),I(s,u),I(l,u),I(f,u)}}}function es(r){let e;return{c(){e=j("Cantidad:")},l(t){e=q(t,"Cantidad:")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function ts(r){let e,t="€";return{c(){e=P("span"),e.textContent=t,this.h()},l(s){e=C(s,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-49n6t8"&&(e.textContent=t),this.h()},h(){L(e,"slot","right"),L(e,"class","text-gray-500 text-lg")},m(s,n){D(s,e,n)},p:me,d(s){s&&$(e)}}}function ss(r){let e,t,s;return e=new ce({props:{icon:ut,class:"text-md mr-1"}}),{c(){v(e.$$.fragment),t=j(`
					Añadir fondos`)},l(n){w(e.$$.fragment,n),t=q(n,`
					Añadir fondos`)},m(n,l){k(e,n,l),D(n,t,l),s=!0},i(n){s||(_(e.$$.fragment,n),s=!0)},o(n){d(e.$$.fragment,n),s=!1},d(n){n&&$(t),I(e,n)}}}function ns(r){let e,t,s;return e=new rt({props:{class:"me-3",size:"4",color:"white"}}),{c(){v(e.$$.fragment),t=j(`
					Transferencia en curso...`)},l(n){w(e.$$.fragment,n),t=q(n,`
					Transferencia en curso...`)},m(n,l){k(e,n,l),D(n,t,l),s=!0},i(n){s||(_(e.$$.fragment,n),s=!0)},o(n){d(e.$$.fragment,n),s=!1},d(n){n&&$(t),I(e,n)}}}function rs(r){let e,t,s,n;const l=[ns,ss],o=[];function f(a,u){return a[9]?0:1}return e=f(r),t=o[e]=l[e](r),{c(){t.c(),s=Fe()},l(a){t.l(a),s=Fe()},m(a,u){o[e].m(a,u),D(a,s,u),n=!0},p(a,u){let i=e;e=f(a),e!==i&&(Be(),d(o[i],1,1,()=>{o[i]=null}),je(),t=o[e],t||(t=o[e]=l[e](a),t.c()),_(t,1),t.m(s.parentNode,s))},i(a){n||(_(t),n=!0)},o(a){d(t),n=!1},d(a){a&&$(s),o[e].d(a)}}}function ls(r){let e,t,s,n,l,o,f,a,u,i,E,F;t=new ht({props:{class:"shadow-none justify-center",$$slots:{default:[yt]},$$scope:{ctx:r}}}),l=new oe({props:{class:"mb-2 w-full text-right",$$slots:{default:[es]},$$scope:{ctx:r}}});function m(p){r[21](p)}let S={max:"1000",type:"number",id:"funds2transfer",name:"funds2transfer",required:!0,class:"w-full",$$slots:{right:[ts]},$$scope:{ctx:r}};return r[4]!==void 0&&(S.value=r[4]),f=new fe({props:S}),Se.push(()=>Le(f,"value",m)),E=new ue({props:{type:"button",disabled:r[9],$$slots:{default:[rs]},$$scope:{ctx:r}}}),E.$on("click",r[11]),{c(){e=P("div"),v(t.$$.fragment),s=N(),n=P("div"),v(l.$$.fragment),o=N(),v(f.$$.fragment),u=N(),i=P("div"),v(E.$$.fragment),this.h()},l(p){e=C(p,"DIV",{class:!0});var V=z(e);w(t.$$.fragment,V),s=A(V),n=C(V,"DIV",{class:!0});var M=z(n);w(l.$$.fragment,M),o=A(M),w(f.$$.fragment,M),M.forEach($),u=A(V),i=C(V,"DIV",{class:!0});var y=z(i);w(E.$$.fragment,y),y.forEach($),V.forEach($),this.h()},h(){L(n,"class","flex flex-row items-baseline gap-2 w-52 self-center"),L(i,"class","flex justify-center col-span-2 mt-2"),L(e,"class","flex flex-col gap-2")},m(p,V){D(p,e,V),k(t,e,null),c(e,s),c(e,n),k(l,n,null),c(n,o),k(f,n,null),c(e,u),c(e,i),k(E,i,null),F=!0},p(p,V){const M={};V&536870928&&(M.$$scope={dirty:V,ctx:p}),t.$set(M);const y={};V&536870912&&(y.$$scope={dirty:V,ctx:p}),l.$set(y);const G={};V&536870912&&(G.$$scope={dirty:V,ctx:p}),!a&&V&16&&(a=!0,G.value=p[4],Ae(()=>a=!1)),f.$set(G);const h={};V&512&&(h.disabled=p[9]),V&536871424&&(h.$$scope={dirty:V,ctx:p}),E.$set(h)},i(p){F||(_(t.$$.fragment,p),_(l.$$.fragment,p),_(f.$$.fragment,p),_(E.$$.fragment,p),F=!0)},o(p){d(t.$$.fragment,p),d(l.$$.fragment,p),d(f.$$.fragment,p),d(E.$$.fragment,p),F=!1},d(p){p&&$(e),I(t),I(l),I(f),I(E)}}}function as(r){let e;return{c(){e=j("Precio:")},l(t){e=q(t,"Precio:")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function os(r){let e,t="€";return{c(){e=P("span"),e.textContent=t,this.h()},l(s){e=C(s,"SPAN",{slot:!0,class:!0,"data-svelte-h":!0}),ze(e)!=="svelte-49n6t8"&&(e.textContent=t),this.h()},h(){L(e,"slot","right"),L(e,"class","text-gray-500 text-lg")},m(s,n){D(s,e,n)},p:me,d(s){s&&$(e)}}}function fs(r){let e;return{c(){e=j("Votos:")},l(t){e=q(t,"Votos:")},m(t,s){D(t,e,s)},d(t){t&&$(e)}}}function us(r){let e,t;return e=new ce({props:{slot:"right",icon:Vt,class:"text-xs"}}),{c(){v(e.$$.fragment)},l(s){w(e.$$.fragment,s)},m(s,n){k(e,s,n),t=!0},p:me,i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){I(e,s)}}}function is(r){let e,t,s;return e=new ce({props:{icon:it,class:"text-md mr-1"}}),{c(){v(e.$$.fragment),t=j(`
				  Adquirir votos`)},l(n){w(e.$$.fragment,n),t=q(n,`
				  Adquirir votos`)},m(n,l){k(e,n,l),D(n,t,l),s=!0},i(n){s||(_(e.$$.fragment,n),s=!0)},o(n){d(e.$$.fragment,n),s=!1},d(n){n&&$(t),I(e,n)}}}function $s(r){let e,t,s;return e=new rt({props:{class:"me-3",size:"4",color:"white"}}),{c(){v(e.$$.fragment),t=j(`
				  Transferencia en curso...`)},l(n){w(e.$$.fragment,n),t=q(n,`
				  Transferencia en curso...`)},m(n,l){k(e,n,l),D(n,t,l),s=!0},i(n){s||(_(e.$$.fragment,n),s=!0)},o(n){d(e.$$.fragment,n),s=!1},d(n){n&&$(t),I(e,n)}}}function cs(r){let e,t,s,n;const l=[$s,is],o=[];function f(a,u){return a[6]?0:1}return e=f(r),t=o[e]=l[e](r),{c(){t.c(),s=Fe()},l(a){t.l(a),s=Fe()},m(a,u){o[e].m(a,u),D(a,s,u),n=!0},p(a,u){let i=e;e=f(a),e!==i&&(Be(),d(o[i],1,1,()=>{o[i]=null}),je(),t=o[e],t||(t=o[e]=l[e](a),t.c()),_(t,1),t.m(s.parentNode,s))},i(a){n||(_(t),n=!0)},o(a){d(t),n=!1},d(a){a&&$(s),o[e].d(a)}}}function ms(r){let e,t,s,n,l,o,f,a,u,i,E,F,m,S,p,V,M;t=new Dt({props:{items:r[0].priceList,placeholder:"Pack de votos"}}),t.$on("change",r[13]),l=new oe({props:{class:"mb-2 w-full text-right",$$slots:{default:[as]},$$scope:{ctx:r}}}),f=new fe({props:{value:r[7],max:"1000",type:"number",id:"votesPrice",name:"votesPrice",readonly:!0,class:"w-full",$$slots:{right:[os]},$$scope:{ctx:r}}}),i=new oe({props:{class:"mb-2 w-full text-right",$$slots:{default:[fs]},$$scope:{ctx:r}}});function y(h){r[23](h)}let G={type:"number",id:"votesToBuy",name:"votesToBuy",required:!0,class:"w-full",$$slots:{right:[us]},$$scope:{ctx:r}};return r[2]!==void 0&&(G.value=r[2]),F=new fe({props:G}),Se.push(()=>Le(F,"value",y)),V=new ue({props:{type:"button",disabled:r[6],$$slots:{default:[cs]},$$scope:{ctx:r}}}),V.$on("click",r[12]),{c(){e=P("div"),v(t.$$.fragment),s=N(),n=P("div"),v(l.$$.fragment),o=N(),v(f.$$.fragment),a=N(),u=P("div"),v(i.$$.fragment),E=N(),v(F.$$.fragment),S=N(),p=P("div"),v(V.$$.fragment),this.h()},l(h){e=C(h,"DIV",{class:!0});var T=z(e);w(t.$$.fragment,T),s=A(T),n=C(T,"DIV",{class:!0});var x=z(n);w(l.$$.fragment,x),o=A(x),w(f.$$.fragment,x),x.forEach($),a=A(T),u=C(T,"DIV",{class:!0});var X=z(u);w(i.$$.fragment,X),E=A(X),w(F.$$.fragment,X),X.forEach($),S=A(T),p=C(T,"DIV",{class:!0});var J=z(p);w(V.$$.fragment,J),J.forEach($),T.forEach($),this.h()},h(){L(n,"class","flex flex-row items-baseline gap-2 w-52 self-center"),L(u,"class","flex flex-row items-baseline gap-2 w-52 self-center"),L(p,"class","flex justify-center col-span-2 mt-2"),L(e,"class","flex flex-col gap-2")},m(h,T){D(h,e,T),k(t,e,null),c(e,s),c(e,n),k(l,n,null),c(n,o),k(f,n,null),c(e,a),c(e,u),k(i,u,null),c(u,E),k(F,u,null),c(e,S),c(e,p),k(V,p,null),M=!0},p(h,T){const x={};T&1&&(x.items=h[0].priceList),t.$set(x);const X={};T&536870912&&(X.$$scope={dirty:T,ctx:h}),l.$set(X);const J={};T&128&&(J.value=h[7]),T&536870912&&(J.$$scope={dirty:T,ctx:h}),f.$set(J);const W={};T&536870912&&(W.$$scope={dirty:T,ctx:h}),i.$set(W);const ee={};T&536870912&&(ee.$$scope={dirty:T,ctx:h}),!m&&T&4&&(m=!0,ee.value=h[2],Ae(()=>m=!1)),F.$set(ee);const K={};T&64&&(K.disabled=h[6]),T&536870976&&(K.$$scope={dirty:T,ctx:h}),V.$set(K)},i(h){M||(_(t.$$.fragment,h),_(l.$$.fragment,h),_(f.$$.fragment,h),_(i.$$.fragment,h),_(F.$$.fragment,h),_(V.$$.fragment,h),M=!0)},o(h){d(t.$$.fragment,h),d(l.$$.fragment,h),d(f.$$.fragment,h),d(i.$$.fragment,h),d(F.$$.fragment,h),d(V.$$.fragment,h),M=!1},d(h){h&&$(e),I(t),I(l),I(f),I(i),I(F),I(V)}}}function ps(r){let e,t,s,n,l,o,f,a;e=new dt({props:{style:"underline",contentClass:"bg-none p-4",$$slots:{default:[Wt]},$$scope:{ctx:r}}});function u(m){r[22](m)}let i={title:"Transferir fondos",class:"w-fit max-w-xs",dismissable:!0,placement:"bottom-center",$$slots:{default:[ls]},$$scope:{ctx:r}};r[8]!==void 0&&(i.open=r[8]),s=new Ke({props:i}),Se.push(()=>Le(s,"open",u));function E(m){r[24](m)}let F={title:"Adquirir votos",class:"w-fit max-w-xs",dismissable:!0,placement:"bottom-center",$$slots:{default:[ms]},$$scope:{ctx:r}};return r[5]!==void 0&&(F.open=r[5]),o=new Ke({props:F}),Se.push(()=>Le(o,"open",E)),{c(){v(e.$$.fragment),t=N(),v(s.$$.fragment),l=N(),v(o.$$.fragment)},l(m){w(e.$$.fragment,m),t=A(m),w(s.$$.fragment,m),l=A(m),w(o.$$.fragment,m)},m(m,S){k(e,m,S),D(m,t,S),k(s,m,S),D(m,l,S),k(o,m,S),a=!0},p(m,[S]){const p={};S&536871230&&(p.$$scope={dirty:S,ctx:m}),e.$set(p);const V={};S&536871440&&(V.$$scope={dirty:S,ctx:m}),!n&&S&256&&(n=!0,V.open=m[8],Ae(()=>n=!1)),s.$set(V);const M={};S&536871109&&(M.$$scope={dirty:S,ctx:m}),!f&&S&32&&(f=!0,M.open=m[5],Ae(()=>f=!1)),o.$set(M)},i(m){a||(_(e.$$.fragment,m),_(s.$$.fragment,m),_(o.$$.fragment,m),a=!0)},o(m){d(e.$$.fragment,m),d(s.$$.fragment,m),d(o.$$.fragment,m),a=!1},d(m){m&&($(t),$(l)),I(e,m),I(s,m),I(o,m)}}}function gs(r,e,t){let s,n,l,o,f,a,u;ct(r,nt,b=>t(25,u=b));let{data:i}=e,E;const F=async b=>{const R=b.target,H=new FormData(R),U={};if(s.fullName!==H.get("fullName")&&H.get("fullName")&&(U.fullName=H.get("fullName")),H.get("password")){if(H.get("password")!==H.get("password2")){Oe("Las contraseñas no coinciden");return}U.password=H.get("password")}if(Object.keys(U).length===0){Oe("No hay cambios que guardar");return}(await Ne(`/api/account/${u}`,{method:"PUT",payload:U})).status};let m=0;const S=async()=>{if(m>0){if(l)return;t(9,l=!0),await new Promise(R=>setTimeout(R,1e3));const b=await Ne("/api/account/funds",{method:"POST",payload:{amount:m}});if(b.status===200){const R=await b.json();t(3,s.funds=R.funds,s)}t(9,l=!1)}t(8,n=!1),t(4,m=0)};let p=0;const V=async()=>{if(p>0){if(f)return;if(a>s.funds){Oe("No tienes suficientes fondos para adquirir los votos");return}t(6,f=!0),await new Promise(R=>setTimeout(R,1e3));const b=await Ne("/api/account/buyvotes",{method:"POST",payload:{amount:p}});if(b.status===200){const R=await b.json();t(3,s.remainingVotes=R.remainingVotes,s),t(3,s.funds=R.funds,s)}t(6,f=!1)}t(5,o=!1),t(2,p=0)},M=b=>{const R=b.target;t(2,p=parseInt(R.value))},y=()=>{t(8,n=!0),t(4,m=1)},G=()=>{t(5,o=!0),t(2,p=1)};function h(b){Se[b?"unshift":"push"](()=>{E=b,t(1,E)})}const T=()=>t(4,m=1),x=()=>t(4,m=5),X=()=>t(4,m=10),J=()=>t(4,m=50);function W(b){m=b,t(4,m)}function ee(b){n=b,t(8,n)}function K(b){p=b,t(2,p)}function se(b){o=b,t(5,o)}return r.$$set=b=>{"data"in b&&t(0,i=b.data)},r.$$.update=()=>{if(r.$$.dirty&1&&t(3,s=i.profile),r.$$.dirty&10&&s&&E){const b=new FormData(E);b.set("fullName",s.fullName),b.set("email",s.email),b.set("role",s.role),b.set("funds",s.funds+""),b.set("remainingVotes",s.remainingVotes+"")}if(r.$$.dirty&5){p<=0&&t(7,a=0);const b=i==null?void 0:i.votesPricing.filter(R=>R.amount<=p).pop();t(7,a=b&&p*(b.price/b.amount)||0)}},t(8,n=!1),t(9,l=!1),t(5,o=!1),t(6,f=!1),t(7,a=0),[i,E,p,s,m,o,f,a,n,l,F,S,V,M,y,G,h,T,x,X,J,W,ee,K,se]}class Ns extends bt{constructor(e){super(),vt(this,e,gs,ps,$t,{data:0})}}export{Ns as component,Ts as universal};
