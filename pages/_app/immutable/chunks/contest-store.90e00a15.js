import{s as Me,p as U,Z as Y,_ as qe,f as j,a as V,g as B,h as N,c as C,d as $,j as ue,i as F,y as T,K as Ve,$ as Ce,l as Z,m as z,n as Fe}from"./scheduler.5287e156.js";import{S as He,i as Le,h as y,b as w,d as k,m as O,a as h,t as b,e as S,g as De,c as Te}from"./index.1b722197.js";import{B as Pe}from"./Button.aaa7a6c9.js";import{C as je}from"./Checkbox.00c2791f.js";import{I as le}from"./Input.175bdf2b.js";import{a as Be,H as Ne}from"./Tooltip.c62a7e2e.js";import{L as ae,c as Ke}from"./index.0f94f00e.js";import{M as Re,e as Ue,a as Ze}from"./fetch-utils.4c277ffa.js";import{D as X}from"./format-utils.ae6ef45f.js";import{s as me}from"./error-manager.d127ec17.js";import{p as ze}from"./navigation.657e86cc.js";function Ae(n){let t;return{c(){t=Z("Título")},l(e){t=z(e,"Título")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function Ge(n){let t;return{c(){t=Z("Descripción")},l(e){t=z(e,"Descripción")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function Ie(n){let t,e,s,u,l,o;function i(p){n[12](p)}let _={color:"primary","aria-describedby":"helper-contest-init-date",$$slots:{default:[Je]},$$scope:{ctx:n}};return n[6]!==void 0&&(_.checked=n[6]),e=new je({props:_}),U.push(()=>y(e,"checked",i)),l=new Ne({props:{id:"helper-contest-init-date",class:"ps-6",$$slots:{default:[Qe]},$$scope:{ctx:n}}}),{c(){t=j("div"),w(e.$$.fragment),u=V(),w(l.$$.fragment),this.h()},l(p){t=B(p,"DIV",{class:!0});var m=N(t);k(e.$$.fragment,m),u=C(m),k(l.$$.fragment,m),m.forEach($),this.h()},h(){ue(t,"class","sm:col-span-2")},m(p,m){F(p,t,m),O(e,t,null),T(t,u),O(l,t,null),o=!0},p(p,m){const E={};m&1048576&&(E.$$scope={dirty:m,ctx:p}),!s&&m&64&&(s=!0,E.checked=p[6],Y(()=>s=!1)),e.$set(E);const c={};m&1048576&&(c.$$scope={dirty:m,ctx:p}),l.$set(c)},i(p){o||(h(e.$$.fragment,p),h(l.$$.fragment,p),o=!0)},o(p){b(e.$$.fragment,p),b(l.$$.fragment,p),o=!1},d(p){p&&$(t),S(e),S(l)}}}function Je(n){let t;return{c(){t=Z("Iniciar el concurso inmediatamente")},l(e){t=z(e,"Iniciar el concurso inmediatamente")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function Qe(n){let t;return{c(){t=Z("El concurso se creará en estado activo y se podrán subir fotos")},l(e){t=z(e,"El concurso se creará en estado activo y se podrán subir fotos")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function we(n){let t,e,s,u,l,o,i,_,p,m,E,c;e=new ae({props:{for:"initDate",class:"mb-2",$$slots:{default:[We]},$$scope:{ctx:n}}});function M(f){n[13](f)}let A={type:"date",id:"initDate",name:"initDate",required:!0};n[2].initDate!==void 0&&(A.value=n[2].initDate),u=new le({props:A}),U.push(()=>y(u,"value",M)),_=new ae({props:{for:"initTime",class:"mb-2",$$slots:{default:[Xe]},$$scope:{ctx:n}}});function G(f){n[14](f)}let K={type:"time",id:"initTime",name:"initTime",required:!0};return n[2].initTime!==void 0&&(K.value=n[2].initTime),m=new le({props:K}),U.push(()=>y(m,"value",G)),{c(){t=j("div"),w(e.$$.fragment),s=V(),w(u.$$.fragment),o=V(),i=j("div"),w(_.$$.fragment),p=V(),w(m.$$.fragment)},l(f){t=B(f,"DIV",{});var d=N(t);k(e.$$.fragment,d),s=C(d),k(u.$$.fragment,d),d.forEach($),o=C(f),i=B(f,"DIV",{});var L=N(i);k(_.$$.fragment,L),p=C(L),k(m.$$.fragment,L),L.forEach($)},m(f,d){F(f,t,d),O(e,t,null),T(t,s),O(u,t,null),F(f,o,d),F(f,i,d),O(_,i,null),T(i,p),O(m,i,null),c=!0},p(f,d){const L={};d&1048576&&(L.$$scope={dirty:d,ctx:f}),e.$set(L);const H={};!l&&d&4&&(l=!0,H.value=f[2].initDate,Y(()=>l=!1)),u.$set(H);const J={};d&1048576&&(J.$$scope={dirty:d,ctx:f}),_.$set(J);const Q={};!E&&d&4&&(E=!0,Q.value=f[2].initTime,Y(()=>E=!1)),m.$set(Q)},i(f){c||(h(e.$$.fragment,f),h(u.$$.fragment,f),h(_.$$.fragment,f),h(m.$$.fragment,f),c=!0)},o(f){b(e.$$.fragment,f),b(u.$$.fragment,f),b(_.$$.fragment,f),b(m.$$.fragment,f),c=!1},d(f){f&&($(t),$(o),$(i)),S(e),S(u),S(_),S(m)}}}function We(n){let t;return{c(){t=Z("Fecha de inicio")},l(e){t=z(e,"Fecha de inicio")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function Xe(n){let t;return{c(){t=Z("Hora de inicio")},l(e){t=z(e,"Hora de inicio")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function Ye(n){let t;return{c(){t=Z("Fecha de fin")},l(e){t=z(e,"Fecha de fin")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function ye(n){let t;return{c(){t=Z("Hora de fin")},l(e){t=z(e,"Hora de fin")},m(e,s){F(e,t,s)},d(e){e&&$(t)}}}function xe(n){let t,e,s,u;return t=new Ze({props:{icon:Ke,class:"w-5 h-5 mr-1"}}),{c(){w(t.$$.fragment),e=V(),s=Z(n[4])},l(l){k(t.$$.fragment,l),e=C(l),s=z(l,n[4])},m(l,o){O(t,l,o),F(l,e,o),F(l,s,o),u=!0},p(l,o){(!u||o&16)&&Fe(s,l[4])},i(l){u||(h(t.$$.fragment,l),u=!0)},o(l){b(t.$$.fragment,l),u=!1},d(l){l&&($(e),$(s)),S(t,l)}}}function et(n){let t,e,s,u,l,o,i,_,p,m,E,c,M,A,G,K,f,d,L,H,J,Q,r,q,x,P,oe,se,R,W,fe,ce,pe;u=new ae({props:{for:"title",class:"mb-2",$$slots:{default:[Ae]},$$scope:{ctx:n}}});function ke(a){n[10](a)}let de={type:"text",id:"title",name:"title",placeholder:"Título",required:!0};n[2].title!==void 0&&(de.value=n[2].title),o=new le({props:de}),U.push(()=>y(o,"value",ke)),m=new ae({props:{for:"description",class:"mb-2",$$slots:{default:[Ge]},$$scope:{ctx:n}}});function Oe(a){n[11](a)}let _e={id:"description",placeholder:"Descripción o temática del concurso",rows:"2",name:"description",required:!0};n[2].description!==void 0&&(_e.value=n[2].description),c=new Be({props:_e}),U.push(()=>y(c,"value",Oe));let v=!n[3]&&Ie(n),D=!n[6]&&we(n);d=new ae({props:{for:"endDate",class:"mb-2",$$slots:{default:[Ye]},$$scope:{ctx:n}}});function Se(a){n[15](a)}let $e={type:"date",id:"endDate",name:"endDate",required:!0};n[2].endDate!==void 0&&($e.value=n[2].endDate),H=new le({props:$e}),U.push(()=>y(H,"value",Se)),q=new ae({props:{for:"endTime",class:"mb-2",$$slots:{default:[ye]},$$scope:{ctx:n}}});function Ee(a){n[16](a)}let ge={type:"time",id:"endTime",name:"endTime",required:!0};return n[2].endTime!==void 0&&(ge.value=n[2].endTime),P=new le({props:ge}),U.push(()=>y(P,"value",Ee)),W=new Pe({props:{type:"submit",class:"w-52",$$slots:{default:[xe]},$$scope:{ctx:n}}}),{c(){t=j("form"),e=j("div"),s=j("div"),w(u.$$.fragment),l=V(),w(o.$$.fragment),_=V(),p=j("div"),w(m.$$.fragment),E=V(),w(c.$$.fragment),A=V(),v&&v.c(),G=V(),D&&D.c(),K=V(),f=j("div"),w(d.$$.fragment),L=V(),w(H.$$.fragment),Q=V(),r=j("div"),w(q.$$.fragment),x=V(),w(P.$$.fragment),se=V(),R=j("div"),w(W.$$.fragment),this.h()},l(a){t=B(a,"FORM",{});var g=N(t);e=B(g,"DIV",{class:!0});var I=N(e);s=B(I,"DIV",{});var ee=N(s);k(u.$$.fragment,ee),l=C(ee),k(o.$$.fragment,ee),ee.forEach($),_=C(I),p=B(I,"DIV",{class:!0});var te=N(p);k(m.$$.fragment,te),E=C(te),k(c.$$.fragment,te),te.forEach($),A=C(I),v&&v.l(I),G=C(I),D&&D.l(I),K=C(I),f=B(I,"DIV",{});var ne=N(f);k(d.$$.fragment,ne),L=C(ne),k(H.$$.fragment,ne),ne.forEach($),Q=C(I),r=B(I,"DIV",{});var ie=N(r);k(q.$$.fragment,ie),x=C(ie),k(P.$$.fragment,ie),ie.forEach($),se=C(I),R=B(I,"DIV",{class:!0});var re=N(R);k(W.$$.fragment,re),re.forEach($),I.forEach($),g.forEach($),this.h()},h(){ue(p,"class","sm:col-span-2"),ue(R,"class","flex justify-end col-span-2"),ue(e,"class","grid gap-4 mb-4 sm:grid-cols-2")},m(a,g){F(a,t,g),T(t,e),T(e,s),O(u,s,null),T(s,l),O(o,s,null),T(e,_),T(e,p),O(m,p,null),T(p,E),O(c,p,null),T(e,A),v&&v.m(e,null),T(e,G),D&&D.m(e,null),T(e,K),T(e,f),O(d,f,null),T(f,L),O(H,f,null),T(e,Q),T(e,r),O(q,r,null),T(r,x),O(P,r,null),T(e,se),T(e,R),O(W,R,null),n[17](t),fe=!0,ce||(pe=Ve(t,"submit",Ce(n[7])),ce=!0)},p(a,g){const I={};g&1048576&&(I.$$scope={dirty:g,ctx:a}),u.$set(I);const ee={};!i&&g&4&&(i=!0,ee.value=a[2].title,Y(()=>i=!1)),o.$set(ee);const te={};g&1048576&&(te.$$scope={dirty:g,ctx:a}),m.$set(te);const ne={};!M&&g&4&&(M=!0,ne.value=a[2].description,Y(()=>M=!1)),c.$set(ne),a[3]?v&&(De(),b(v,1,1,()=>{v=null}),Te()):v?(v.p(a,g),g&8&&h(v,1)):(v=Ie(a),v.c(),h(v,1),v.m(e,G)),a[6]?D&&(De(),b(D,1,1,()=>{D=null}),Te()):D?(D.p(a,g),g&64&&h(D,1)):(D=we(a),D.c(),h(D,1),D.m(e,K));const ie={};g&1048576&&(ie.$$scope={dirty:g,ctx:a}),d.$set(ie);const re={};!J&&g&4&&(J=!0,re.value=a[2].endDate,Y(()=>J=!1)),H.$set(re);const he={};g&1048576&&(he.$$scope={dirty:g,ctx:a}),q.$set(he);const be={};!oe&&g&4&&(oe=!0,be.value=a[2].endTime,Y(()=>oe=!1)),P.$set(be);const ve={};g&1048592&&(ve.$$scope={dirty:g,ctx:a}),W.$set(ve)},i(a){fe||(h(u.$$.fragment,a),h(o.$$.fragment,a),h(m.$$.fragment,a),h(c.$$.fragment,a),h(v),h(D),h(d.$$.fragment,a),h(H.$$.fragment,a),h(q.$$.fragment,a),h(P.$$.fragment,a),h(W.$$.fragment,a),fe=!0)},o(a){b(u.$$.fragment,a),b(o.$$.fragment,a),b(m.$$.fragment,a),b(c.$$.fragment,a),b(v),b(D),b(d.$$.fragment,a),b(H.$$.fragment,a),b(q.$$.fragment,a),b(P.$$.fragment,a),b(W.$$.fragment,a),fe=!1},d(a){a&&$(t),S(u),S(o),S(m),S(c),v&&v.d(),D&&D.d(),S(d),S(H),S(q),S(P),S(W),n[17](null),ce=!1,pe()}}}function tt(n){let t,e,s;function u(o){n[18](o)}let l={title:n[5],class:"min-w-full",$$slots:{default:[et]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.open=n[0]),t=new Re({props:l}),U.push(()=>y(t,"open",u)),t.$on("close",n[8]),{c(){w(t.$$.fragment)},l(o){k(t.$$.fragment,o)},m(o,i){O(t,o,i),s=!0},p(o,[i]){const _={};i&32&&(_.title=o[5]),i&1048670&&(_.$$scope={dirty:i,ctx:o}),!e&&i&1&&(e=!0,_.open=o[0],Y(()=>e=!1)),t.$set(_)},i(o){s||(h(t.$$.fragment,o),s=!0)},o(o){b(t.$$.fragment,o),s=!1},d(o){S(t,o)}}}function nt(n,t,e){let s,u,l,o,i;const _=qe(),p=async r=>{const q=u?null:X.fromISO(`${i.initDate}T${i.initTime}:00`),x=X.fromISO(`${i.endDate}T${i.endTime}:00`);if(q&&q.toMillis()>x.toMillis()){me("La fecha de inicio no puede ser posterior a la fecha de fin");return}if(q&&q.toMillis()<X.now().toMillis()){me("La fecha y hora de inicio no puede ser anterior al momento actual");return}if(x.toMillis()<X.now().toMillis()){me("La fecha y hora de fin no puede ser anterior al momento actual");return}const P={title:i.title,description:i.description,initTimestamp:(q==null?void 0:q.toISO())||null,endTimestamp:x.toISO()},oe=s?`/api/contest/${s}`:"/api/contest",se=await Ue(oe,{method:s?"PUT":"POST",payload:P});if(se.status===200){_("close",{});const R=await se.json();_(s?"updated":"created",R)}},m=()=>{_("close",{})};let{openModal:E=!1}=t,{contestData:c=null}=t,M;function A(r){n.$$.not_equal(i.title,r)&&(i.title=r,e(2,i),e(1,M),e(9,c))}function G(r){n.$$.not_equal(i.description,r)&&(i.description=r,e(2,i),e(1,M),e(9,c))}function K(r){u=r,e(6,u)}function f(r){n.$$.not_equal(i.initDate,r)&&(i.initDate=r,e(2,i),e(1,M),e(9,c))}function d(r){n.$$.not_equal(i.initTime,r)&&(i.initTime=r,e(2,i),e(1,M),e(9,c))}function L(r){n.$$.not_equal(i.endDate,r)&&(i.endDate=r,e(2,i),e(1,M),e(9,c))}function H(r){n.$$.not_equal(i.endTime,r)&&(i.endTime=r,e(2,i),e(1,M),e(9,c))}function J(r){U[r?"unshift":"push"](()=>{M=r,e(1,M)})}function Q(r){E=r,e(0,E)}return n.$$set=r=>{"openModal"in r&&e(0,E=r.openModal),"contestData"in r&&e(9,c=r.contestData)},n.$$.update=()=>{var r;n.$$.dirty&512&&e(3,s=c==null?void 0:c.id),n.$$.dirty&8&&e(5,l=s?"Editar concurso":"Nuevo concurso"),n.$$.dirty&8&&e(4,o=s?"Modificar concurso":"Crear concurso"),n.$$.dirty&518&&!i.title&&M&&c&&(e(2,i.title=c.title,i),e(2,i.description=c.description,i),e(2,i.initDate=X.fromISO(c.initTimestamp).toISODate(),i),e(2,i.initTime=X.fromISO(c.initTimestamp).toISOTime({includeOffset:!1}).substring(0,5),i),e(2,i.endDate=X.fromISO(c.endTimestamp).toISODate(),i),e(2,i.endTime=(r=X.fromISO(c.endTimestamp).toISOTime({includeOffset:!1}))==null?void 0:r.substring(0,5),i))},e(6,u=!1),e(2,i={}),[E,M,i,s,o,l,u,p,m,c,A,G,K,f,d,L,H,J,Q]}class dt extends He{constructor(t){super(),Le(this,t,nt,tt,Me,{openModal:0,contestData:9})}}const _t=ze("contestId",null);export{dt as F,_t as c};
